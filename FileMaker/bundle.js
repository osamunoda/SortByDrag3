!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class n extends HTMLElement{constructor(t,e,i,n,s,r,o,a,l){super(),this.name=t,this.width=e,this.height=i,this.items=n||[],this.handler=s,this.drag=r||!1;const h=this.attachShadow({mode:"closed"});this.selected=null,this.parent=null,this.noAnimation=o||!1,this.selectedText=a||"";const c=this.noAnimation?"none":"translateY(1000px)",d=this.noAnimation?"none":"0.3s";this.yScroll=l||0,h.innerHTML=`<style>\n            *{margin:0; padding:0;}\n            :host{\n                box-sizing:border-box;\n                display:block;\n                width:${this.width}px;\n                position:relative;\n                margin:0;\n                padding:0;\n                border:2px solid;\n                overflow:hidden;\n                position:relative;\n                height:${this.height}px;\n            }\n            div{\n                height:2rem;\n                border-bottom:1px solid #ccc;\n                display:flex;\n                justify-content:flex-start;\n                align-items:center;\n                padding-left:1rem;\n            }\n            ul{\n                position:relative;\n                width:${this.width}px;\n                height:calc(${this.height}px - 2rem);\n                overflow:scroll;\n                list-style:none;\n                padding:0;\n                \n            }\n            li{\n                display:flex;\n                justify-content:center;\n                align-items:center;\n                width:calc(100% - 4px);\n                box-sizing:border-box;\n                height:100px;\n                transition:${d};\n                \n                height:100px;\n                border:1px solid #ccc;\n                transform:${c};\n            }\n        </style>\n        <div>${this.name}</div>\n        <ul>\n            <slot></slot>\n        </ul>\n\n        `,this._shadow=h,this._coulmn=h.querySelector("ul")}connectedCallback(){if(this.dataset.width=this.width+"",this.dataset.height=this.height+"",this.dataset.items=this.items.join(","),this._coulmn&&this.noAnimation){this._coulmn.querySelectorAll("li").forEach(t=>{t.style.transition="none",t.innerText===this.selectedText?t.style.background="pink":t.style.background="white"})}this._coulmn&&this._coulmn.scrollTo(0,this.yScroll)}static get observedAttributes(){return["data-width","data-height","data-items"]}setSelected(t){this.selected=t,this.selectedText=t.innerText,this.showSelected(t)}getSelected(){return this.selectedText?this.selectedText:""}getScroll(){return this._coulmn?this._coulmn.scrollTop:0}showSelected(t){if(this._coulmn){this._coulmn.querySelectorAll("li").forEach(t=>{t.style.background="white"}),t.style.background="pink"}}setParent(t){this.parent=t}getParent(){return this.parent}clearItems(){if(this._coulmn){this._coulmn.querySelectorAll("li").forEach(t=>{this._coulmn&&this._coulmn.removeChild(t)})}}setItems(t){this.dataset.items=Array.isArray(t)?t.join(","):t}attributeChangedCallback(t,e,i){if("data-width"===t)this.style.width=Number(i)+"px";else if("data-height"===t)this.style.height=Number(i)+"px";else if("data-items"===t){if(!i||!i.length)return;this.clearItems(),this.items=i.split(",").map(t=>t.trim()),this.items.forEach((t,e)=>{const i=document.createElement("li");i.onclick=this.handler,this.drag&&(i.setAttribute("draggable","true"),i.ondragstart=t=>{const e=this.getParent(),n=e?e.getSelected()+"."+i.innerText:i.innerText;t.dataTransfer.setData("text",n)}),i.innerText=t,this._coulmn&&(this._coulmn.appendChild(i),this.noAnimation||setTimeout(()=>{i.style.transitionDelay=.1*e+"s",i.style.transform="translateY(0)"},300))})}}}customElements.define("list-column",n);class s extends HTMLElement{constructor(t,e,i){super(),this.columns=i||null,this.width=t,this.height=e;const n=this.attachShadow({mode:"closed"});n.innerHTML=`<style>\n        :host{\n            position:relative;\n            width:${this.width}px;\n            height:${this.height}px;\n        }\n        div.container{\n            display:flex;\n            justify-contenet:flex-start;\n            align-items:flex-start;\n            position:relative;\n            width:${this.width}px;\n            height:${this.height}px;\n        }\n        </style>\n        <div class="container"><slot></slot></div>`,this._shadow=n,this._slot=n.querySelector("div.container")}connectedCallback(){console.log("connected callback"),this.columns=this._shadow.querySelectorAll("list-column"),this.dataset.width=this.width+"",this.dataset.height=this.height+""}static get observedAttributes(){return["data-width","data-height"]}attributeChangedCallback(t,e,i){console.log("changed callback"),"data-width"===t?this.style.width=i+"px":"data-height"===t&&(this.style.height=i+"px")}addCoulumn(t){this._slot&&this._slot.appendChild(t)}getList(){return this.columns}}customElements.define("list-group",s);class r extends HTMLElement{constructor(t,e,i,n,s){super(),this.fieldName=t,this.description=e,this.errorChecker=n,this.color=s||"black",this.tableName="",this.parent=i;const r=this.attachShadow({mode:"closed"});r.innerHTML=`<style>\n        div{padding:5px}\n        .container{border-bottom:1px solid #ccc}\n        </style>\n        <div class="container">\n            <div>${this.fieldName}<span>( ${this.description} )</span></div>\n            <input />\n        </div>\n        `,this._shadow=r,this._input=r.querySelector("input"),this._container=r.querySelector(".container")}errorCheck(){if(this._input&&!this._input.value&&this._container){const t=this.errorChecker(this._input.value);return t&&(this._container.style.color="red"),t}return!1}get(){return this._input?this._input.value:""}table(){return this.tableName}connectedCallback(){this._input&&(this._input.ondragover=t=>{t.stopPropagation(),t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="copy")},this._input.ondrop=t=>{t.stopPropagation(),t.preventDefault(),t.dataTransfer&&this._input&&(this._input.value=t.dataTransfer.getData("Text"),this.tableName=2===this._input.value.split(".").length?this._input.value.split(".")[0]:"",this.parent.setTable(this.tableName),this._container&&(this._container.style.color=this.color))},this._input.onchange=t=>{console.log("alert input change"),!this.errorCheck()&&this._container&&(this._container.style.color=this.color)})}static get observerdAttributes(){return[]}attributeChangedCallback(t,e,i){}}customElements.define("form-item",r);class o extends HTMLElement{constructor(t,e){super(),this.fields=t,this.descriptions=e,this.orderBy=null,this.isDescending=!1,this.where=null,this.tableName="",this.basicCode="",this.items=[],this.options=[],this.optionDescriptions=[];const i=this.attachShadow({mode:"closed"});i.innerHTML='<style>\n        :host{\n            font:sans-serif;\n            color:rgba(0,0,0,0.9);\n            width:400px;\n            display:flex;\n        }\n        .top{\n            width:200px;\n            border:3px solid;\n            border-radius:4px;\n            box-sizing:border-box;\n            flex:1;\n            position:relative;\n        }\n        input{\n            margin:4px;\n            box-sizing:border-box;\n        }\n        textarea{\n            opacity:0;\n            height:0;\n            margin:0;\n            box-sizing:border-box;\n        }\n        #btn{\n            display:flex;\n            justify-content:center;\n            align-items:center;\n            width:80%;\n            border:2px solid;\n            padding:1rem;\n            border-radius:6px;\n            box-sizing:border-box;\n            position:absolute;\n            left:10%;\n            bottom:5px;\n        }\n        #optionsArea{\n            margin:4px 0;\n        }\n        #btn:hover{\n            background:pink;\n        }\n        </style>\n        <div id="container" class="top">\n        </div>\n        <div class="top">\n            <div id="optionsArea"></div>\n            <div id="btn">Get Code</div>\n            <textarea id="code" contentEditable tabIndex="-1"></textarea>\n        </div>\n        ',this._shadow=i,this._code=i.querySelector("#code")||null,this._btn=i.querySelector("#btn")||null,this._container=i.querySelector("#container")||null,this._optionsArea=i.querySelector("#optionsArea")||null}connectedCallback(){this.fields.forEach((t,e)=>{const i=new r(t,this.descriptions[e],this,a);this._container&&(this._container.appendChild(i),this.items.push(i))});const t=new r("orderBy","sort order",this,a),e=new r("where","filter",this,a);this.orderBy=t,this.where=e,this._container&&this._container.appendChild(t),this.options.length?this.options.forEach((t,e)=>{const i=new r(t,this.optionDescriptions[e],this,a);this._optionsArea&&this._optionsArea.appendChild(i)}):this._optionsArea&&(this._optionsArea.style.display="none"),this._btn&&(this._btn.onmouseup=()=>{this.checkItems()?this._code&&(this._code.value=this.basicCode.replace("__SQLSTRING__",this.getSQL()),this._code.value=this._code.value.replace("__OPTIONS__",this.getOptions()),this._code.focus(),this._code.select(),setTimeout(()=>{document.execCommand("copy"),alert("Copied! Paste this code into the Text Object named 'SortByDrag_FMcode' in layout mode")},0)):alert("There are errors in input values")})}checkItems(){let t=!0;return this.items.forEach(e=>{e.errorCheck()&&(t=!1)}),this.orderBy&&this.orderBy.errorCheck()&&(t=!1),this.errorOptions()&&(t=!1),t}getFields(){let t=[],e=!0;return console.log("getFields",this.items),this.items.forEach(i=>{i.get()?t.push(`'\\"' + ${this.quote(i.get())} + '\\"'`):e=!1}),e?t.join(","):""}getSQL(){const t=this.getFields();if(!t)return"";let e="SELECT "+t;return this.getTable()&&(e+=" FROM "+this.getTable()),this.getWhere()&&(e+=this.getWhere()),this.getOrderBy()&&(e+=this.getOrderBy()),e}setTable(t){this.tableName=t}getTable(){return`\\"${this.tableName}\\"`}getWhere(){return this.orderBy&&this.orderBy.get()?` WHERE ${this.quote(this.orderBy.get())} > 0`:""}getOrderBy(){return this.orderBy&&this.orderBy.get()?` ORDER BY ${this.quote(this.orderBy.get())}`:""}quote(t){const e=t.split("."),i=e.map(t=>`\\"${t}\\"`);return 2===e.length?i.join("."):t}getOptions(){if(this._optionsArea){return Array.from(this._optionsArea.querySelectorAll("form-item")).map((t,e)=>`;["__${this.options[e].toUpperCase()}__";"${t.get()}"]`).join("")}return""}static get observedAttributes(){return[]}setBasicCode(t){this.basicCode=t}setOptions(t,e){this.options.push(t),this.optionDescriptions.push(e||"")}errorOptions(){let t=!1;if(this._optionsArea){Array.from(this._optionsArea.querySelectorAll("form-item")).forEach(e=>{e.errorCheck()&&(t=!0)})}return t}attributeChangedCallback(t,e,i){}}function a(t){return console.log("falsy",t),null==t||""===t}customElements.define("code-generator",o);class l extends HTMLElement{constructor(t){super(),this.link=t,this.xml=new Document;const e=this.attachShadow({mode:"closed"});e.innerHTML='<style>\n            :host{\n                margin:0; padding:0;\n            }\n            #frame{\n                width:100vw;\n                height:100vh;\n                display:flex;\n                justify-content:center;\n                align-items:center;\n                flex-direction:column;\n                background:white;\n                transition.0.5s;\n            }\n            #receiver{\n                width:300px;\n                height:300px;\n                border:3px dashed #ccc;\n                border-radius:10px;\n                transition:0.5s;\n                display:flex;\n                justify-content:center;\n                align-items:center;\n            }\n\n        </style>\n            <div id = "frame">\n                <h1>Drop XML file here</h1>\n                <div id="receiver"><svg xmlns="http://www.w3.org/2000/svg" width="124" height="124" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg></div>\n            </div>\n        ',this._shadow=e,this._frame=e.querySelector("#frame"),this._receiver=e.querySelector("#receiver"),this.toTable=new Map,this.toFields=new Map,this.tableFields=new Map}connectedCallback(){this._receiver&&(this._receiver.ondragover=t=>{t.stopPropagation(),t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="copy")},this._receiver.ondrop=t=>{if(t.stopPropagation(),t.preventDefault(),t.dataTransfer){const e=t.dataTransfer.files[0],i=new FileReader;i.onload=t=>{const e=t.target.result,i=new DOMParser;this.xml=i.parseFromString(e,"text/xml"),this.xml.querySelectorAll("AddAction > TableOccurrenceCatalog > TableOccurrence").forEach(t=>{let e="";const i=t.querySelector("BaseTableReference");i&&(e=i.getAttribute("name")||""),this.toTable.set(t.getAttribute("name")||"",e)}),this.xml.querySelectorAll("AddAction > FieldsForTables > FieldCatalog > TableOccurrenceReference").forEach(t=>{const e=[];t.parentNode&&t.parentNode.querySelectorAll("ObjectList > Field").forEach(t=>{e.push(t.getAttribute("name")||"")});const i=t.getAttribute("name")||"";this.toFields.set(i,e);const n=this.toTable.get(i)||"";this.tableFields.set(n,e)}),this.link.setItems(this.getTables().join(",")),this._receiver&&(this._receiver.style.transform="scale(10)",this._receiver.style.opacity="0",setTimeout(()=>{this.style.display="none"},500))},e&&i.readAsText(e)}})}getTables(){return Array.from(this.toFields.keys())}getFields(t){return this.toFields.get(t)}getXML(){return this.xml}static get observerdAttributes(){return[]}attributeChangedCallback(t,e,i){}}customElements.define("xml-receiver",l);const h={tables:"__TABLES__",selectedTable:"__SELECTEDTABLE__",fields:"__FIELDS__",scroll:Number("__SCROLL__")};h.fields="";const c=new n("TOs",200,450,h.tables.split(","),t=>{if(t.target&&t.target instanceof HTMLElement){c.setSelected(t.target);const e=m.getFields(t.target.innerText)||[];e.length&&d.setItems(e.join(","))}d.setParent(c)},!1,!0,h.selectedTable,h.scroll),d=new n("Fields",200,450,h.fields.split(","),t=>{t.target&&(t.target,HTMLElement)},!0,!1,"",0),u=new s(400,500);h.selectedTable&&(c.style.transition="none"),d.setParent(c),u.addCoulumn(c),u.addCoulumn(d);const p=new o(["id","panel_order","Main text","Sub Text","background"],["Record ID","order number","Main text displayed in center","Sub text","background color or image"]);p.setBasicCode(' Let(code=GetLayoutObjectAttribute ( "sortByDrag"; "content" ); \nSubstitute ( code; ["__SQLRESULT__"; ExecuteSQL("__SQLSTRING__"; ""; "],[")]; ["__SORTDB__"; Get(FileName)];["__SORTSCROLL__";$scroll]; ["__ORDER__"; $panelOrder]__OPTIONS__)\n)'),p.setOptions("columns","Number of columns"),p.setOptions("cardHeight","height of card"),p.setOptions("textColor","color of text"),p.setOptions("enableSlide","horizontal slide in one column: true/false");const g=document.getElementById("root");g&&(g.appendChild(u),g.appendChild(p));const m=new l(c);document.body.appendChild(m)}]);